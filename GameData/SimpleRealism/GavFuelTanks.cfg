// GavFuelTanks
// Standard and HP Tanks first
TANK_DEFINITION
{
	name = Tank-1945
	highlyPressurized = False
	basemass = 0.0000125 * volume
	baseCost = 0 * volume
	addResources = true
	addLead = true
}
@TANK_DEFINITION[Tank-1945]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.000125
		@mass -= 0.0000125
	}
}
TANK_DEFINITION
{
	name = Tank-1955
	highlyPressurized = False
	basemass = 0.000008 * volume
	baseCost = 0 * volume
	addResources = true
	addLead = true
}
@TANK_DEFINITION[Tank-1955]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.00008
		@mass -= 0.000008
	}
}
TANK_DEFINITION
{
	name = Tank-1955-HP
	highlyPressurized = True
	basemass = 0.000022 * volume
	baseCost = 0 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
}
@TANK_DEFINITION[Tank-1955-HP]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.00022
		@mass -= 0.000022
	}
}
TANK_DEFINITION
{
	name = Tank-1965
	highlyPressurized = False
	basemass = 0.00000575 * volume
	baseCost = 0 * volume
	addResources = true
	addLead = true
}
@TANK_DEFINITION[Tank-1965]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.0000575
		@mass -= 0.00000575
	}
}
TANK_DEFINITION
{
	name = Tank-1965-HP
	highlyPressurized = True
	basemass = 0.000016 * volume
	baseCost = 0 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
}
@TANK_DEFINITION[Tank-1965-HP]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.00016
		@mass -= 0.000016
	}
}
TANK_DEFINITION
{
	name = Tank-1970
	highlyPressurized = False
	basemass = 0.000005 * volume
	baseCost = 0 * volume
	addResources = true
	addLead = true
}
@TANK_DEFINITION[Tank-1970]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.00005
		@mass -= 0.000005
	}
}
TANK_DEFINITION
{
	name = Tank-1970-HP
	highlyPressurized = True
	basemass = 0.000014 * volume
	baseCost = 0 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
}
@TANK_DEFINITION[Tank-1970-HP]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.00014
		@mass -= 0.000014
	}
}
TANK_DEFINITION
{
	name = Tank-1980
	highlyPressurized = False
	basemass = 0.000004 * volume
	baseCost = 0 * volume
	addResources = true
	addLead = true
}
@TANK_DEFINITION[Tank-1980]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.00004
		@mass -= 0.000004
	}
}
TANK_DEFINITION
{
	name = Tank-1980-HP
	highlyPressurized = True
	basemass = 0.000011 * volume
	baseCost = 0 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
}
@TANK_DEFINITION[Tank-1980-HP]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.00011
		@mass -= 0.000011
	}
}
TANK_DEFINITION
{
	name = Tank-1995
	highlyPressurized = False
	basemass = 0.000003 * volume
	baseCost = 0 * volume
	addResources = true
	addLead = true
}
@TANK_DEFINITION[Tank-1995]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.00003
		@mass -= 0.000003
	}
}
TANK_DEFINITION
{
	name = Tank-1995-HP
	highlyPressurized = True
	basemass = 0.0000075 * volume
	baseCost = 0 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
}
@TANK_DEFINITION[Tank-1995-HP]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.000075
		@mass -= 0.0000075
	}
}
TANK_DEFINITION
{
	name = Tank-2020
	highlyPressurized = False
	basemass = 0.0000023 * volume
	baseCost = 0 * volume
	addResources = true
	addLead = true
}
@TANK_DEFINITION[Tank-2020]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.000023
		@mass -= 0.0000023
	}
}
TANK_DEFINITION
{
	name = Tank-2020-HP
	highlyPressurized = True
	basemass = 0.000005 * volume
	baseCost = 0 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
}
@TANK_DEFINITION[Tank-2020-HP]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.00005
		@mass -= 0.000005
	}
}
TANK_DEFINITION
{
	name = Tank-2040
	highlyPressurized = False
	basemass = 0.000002 * volume
	baseCost = 0 * volume
	addResources = true
	addLead = true
}
@TANK_DEFINITION[Tank-2040]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.00002
		@mass -= 0.000002
	}
}
TANK_DEFINITION
{
	name = Tank-2040-HP
	highlyPressurized = True
	basemass = 0.0000045 * volume
	baseCost = 0 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
}
@TANK_DEFINITION[Tank-2040-HP]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.000045
		@mass -= 0.0000045
	}
}
TANK_DEFINITION
{
	name = Tank-2060
	highlyPressurized = False
	basemass = 0.0000019 * volume
	baseCost = 0 * volume
	addResources = true
	addLead = true
}
@TANK_DEFINITION[Tank-2060]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.000019
		@mass -= 0.0000019
	}
}
TANK_DEFINITION
{
	name = Tank-2060-HP
	highlyPressurized = True
	basemass = 0.0000042 * volume
	baseCost = 0 * volume
	addResources = true
	addResourcesHP = true
	addLead = true
}
@TANK_DEFINITION[Tank-2060-HP]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.000042
		@mass -= 0.0000042
	}
}
// now the cryo tanks
TANK_DEFINITION
{
	name = Tank-1965-Cryo
	highlyPressurized = False
	basemass = 0.0000069 * volume
	baseCost = 0 * volume
	addResourcesCryo = true
	numberOfMLILayers = 3
	maxMLILayers = 3
}
@TANK_DEFINITION[Tank-1965-Cryo]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.000069
		@mass -= 0.0000069
	}
}
TANK_DEFINITION
{
	name = Tank-1970-Cryo
	highlyPressurized = False
	basemass = 0.000006 * volume
	baseCost = 0 * volume
	addResourcesCryo = true
	numberOfMLILayers = 5
	maxMLILayers = 10
}
@TANK_DEFINITION[Tank-1970-Cryo]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.00006
		@mass -= 0.000006
	}
}
TANK_DEFINITION
{
	name = Tank-1980-Cryo
	highlyPressurized = False
	basemass = 0.0000048 * volume
	baseCost = 0 * volume
	addResourcesCryo = true
	numberOfMLILayers = 7
	maxMLILayers = 20
}
@TANK_DEFINITION[Tank-1980-Cryo]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.000048
		@mass -= 0.0000048
	}
}
TANK_DEFINITION
{
	name = Tank-1995-Cryo
	highlyPressurized = False
	basemass = 0.0000036 * volume
	baseCost = 0 * volume
	addResourcesCryo = true
	numberOfMLILayers = 9
	maxMLILayers = 40
}
@TANK_DEFINITION[Tank-1995-Cryo]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.000036
		@mass -= 0.0000036
	}
}
TANK_DEFINITION
{
	name = Tank-2020-Cryo
	highlyPressurized = False
	basemass = 0.00000276 * volume
	baseCost = 0 * volume
	addResourcesCryo = true
	numberOfMLILayers = 11
	maxMLILayers = 60
}
@TANK_DEFINITION[Tank-2020-Cryo]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.0000276
		@mass -= 0.00000276
	}
}
TANK_DEFINITION
{
	name = Tank-2040-Cryo
	highlyPressurized = False
	basemass = 0.0000024 * volume
	baseCost = 0 * volume
	addResourcesCryo = true
	numberOfMLILayers = 13
	maxMLILayers = 80
}
@TANK_DEFINITION[Tank-2040-Cryo]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.000024
		@mass -= 0.0000024
	}
}
TANK_DEFINITION
{
	name = Tank-2060-Cryo
	highlyPressurized = False
	basemass = 0.00000228 * volume
	baseCost = 0 * volume
	addResourcesCryo = true
	numberOfMLILayers = 15
	maxMLILayers = 100
}
@TANK_DEFINITION[Tank-2060-Cryo]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.0000228
		@mass -= 0.00000228
	}
}

// Electric tanks last

TANK_DEFINITION
{
	name = Tank-1980-Electric
	highlyPressurized = True
	basemass = 0.000026 * volume
	baseCost = 0 * volume
	addResourcesElectric = true
}
@TANK_DEFINITION[Tank-1980-Electric]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.00026
		@mass -= 0.000026
	}
}
TANK_DEFINITION
{
	name = Tank-1995-Electric
	highlyPressurized = True
	basemass = 0.0000195 * volume
	baseCost = 0 * volume
	addResourcesElectric = true
}
@TANK_DEFINITION[Tank-1995-Electric]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.000195
		@mass -= 0.0000195
	}
}
TANK_DEFINITION
{
	name = Tank-2020-Electric
	highlyPressurized = True
	basemass = 0.00001495 * volume
	baseCost = 0 * volume
	addResourcesElectric = true
}
@TANK_DEFINITION[Tank-2020-Electric]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.0001495
		@mass -= 0.00001495
	}
}
TANK_DEFINITION
{
	name = Tank-2040-Electric
	highlyPressurized = True
	basemass = 0.000013 * volume
	baseCost = 0 * volume
	addResourcesElectric = true
}
@TANK_DEFINITION[Tank-2040-Electric]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.00013
		@mass -= 0.000013
	}
}
TANK_DEFINITION
{
	name = Tank-2060-Electric
	highlyPressurized = True
	basemass = 0.00001235 * volume
	baseCost = 0 * volume
	addResourcesElectric = true
}
@TANK_DEFINITION[Tank-2060-Electric]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.0001235
		@mass -= 0.00001235
	}
}

// Elec-only tank
TANK_DEFINITION
{
	name = Tank-Electric-Only
	highlyPressurized = True
	basemass = 0.00001235 * volume
	baseCost = 0 * volume
	TANK
	{
		name = ElectricCharge
		mass = 0.00144 // LM high-perf battery
		cost = 0
		utilization = 1000
		fillable = True
		amount = 0.0
		maxAmount = 0.0
		//note = (pressurized)
	}
}
@TANK_DEFINITION[Tank-2060-Electric]
{
	@TANK[*]:HAS[~mass[*]]
	{
		mass = 0.0001235
		@mass -= 0.00001235
	}
}

// Then add the resources
// Electric resources
// Electric omitted due to having it classed as propellant, use battery instead
@TANK_DEFINITION:HAS[#addResourcesElectric[true]]:FIRST
{
	-addResourcesElectric = DEL
	TANK
	{
		name = ArgonGas
		mass = 0.00003
		utilization = 100
		fillable = True
		amount = 0.0
		maxAmount = 0.0
		note = (pressurized)
	}
	TANK
	{
		name = XenonGas
		mass = 0.00003
		utilization = 100
		fillable = True
		amount = 0.0
		maxAmount = 0.0
		note = (pressurized)
	}
	TANK
	{
		name = Lithium
		mass = 0.00003
		utilization = 100
		fillable = True
		amount = 0.0
		maxAmount = 0.0
		note = (pressurized)
	}
}
// Regular resources
@TANK_DEFINITION:HAS[#addResources[true]]:FIRST
{
	-addResources = DEL
	TANK
	{
		name = LqdOxygen
		//mass = 0.000014
		utilization = 1
		fillable = True
		amount = 0.0
		maxAmount = 0.0
		wallThickness = 0.0025
		wallConduction = 16
		temperature = 90.15
		insulationThickness = 0.01
		insulationConduction = 0.02
		//note = (lacks insulation)
	}
	TANK
	{
		name = Kerosene
		//mass = 0.000012
		utilization = 1
		fillable = True
		amount = 0.0
		maxAmount = 0.0
	}
	TANK
	{
		name = LqdHydrogen
		//mass = 0.000002
		utilization = 1
		fillable = True
		amount = 0.0
		maxAmount = 0.0
		temperature = 20.15
		wallThickness = 0.0025
		wallConduction = 205
		insulationThickness = 0.0381
		insulationConduction = 0.014
		//note = (basic insulation)
	}
	TANK
	{
		name = LqdAmmonia
		//mass = 0.000012
		utilization = 1
		fillable = True
		amount = 0.0
		maxAmount = 0.0
		temperature = 237.65
		wallThickness = 0.0025
		wallConduction = 8
		insulationThickness = 0.01
		insulationConduction = 0.02
		//note = (lacks insulation)
	}
	TANK
	{
		name = LqdMethane
		//mass = 0.000012
		utilization = 1
		fillable = True
		amount = 0.0
		maxAmount = 0.0
		temperature = 111.45
		wallThickness = 0.0025
		wallConduction = 16
		insulationThickness = 0.01
		insulationConduction = 0.02
		//note = (lacks insulation)
	}
}

// HP resources
@TANK_DEFINITION:HAS[#addResourcesHP[true]]:FIRST
{
	-addResourcesHP = DEL
	TANK
	{
		name = NTO
		//mass = 0.000016
		utilization = 1
		fillable = True
		amount = 0.0
		maxAmount = 0.0
	}
	TANK
	{
		name = Aerozine50
		//mass = 0.000016
		utilization = 1
		fillable = True
		amount = 0.0
		maxAmount = 0.0
	}
}

// Add lead
@TANK_DEFINITION:HAS[#addLead[true]]:FIRST
{
	-addLead = DEL
	TANK
	{
		name = LeadBallast
		//mass = 0
		utilization = 1
		fillable = True
		amount = 0.0
		maxAmount = 0.0
	}
}

// Add cryo
@TANK_DEFINITION:HAS[#addResourcesCryo[true]]:FIRST
{
	-addResourcesCryo = DEL
	TANK
	{
		name = LqdOxygen
		mass = 0.0000112
		utilization = 1
		fillable = True
		amount = 0.0
		maxAmount = 0.0
		wallThickness = 0.0025
		wallConduction = 16
		insulationThickness = 0.0381
		insulationConduction = 0.014
		temperature = 90.15		
		note = (has insulation)
	}
	TANK
	{
		name = Kerosene
		mass = 0.000012
		utilization = 1
		fillable = True
		amount = 0.0
		maxAmount = 0.0
	}
	TANK
	{
		name = LqdHydrogen
		mass = 0.0000016
		utilization = 1
		fillable = True
		amount = 0.0
		maxAmount = 0.0
		temperature = 20.15
		wallThickness = 0.0025
		wallConduction = 205
		insulationThickness = 0.0381
		insulationConduction = 0.014
		note = (has insulation)
	}
	TANK
	{
		name = LqdAmmonia
		mass = 0.0000096
		utilization = 1
		fillable = True
		amount = 0.0
		maxAmount = 0.0
		temperature = 237.65
		wallThickness = 0.0025
		wallConduction = 205
		insulationThickness = 0.0381
		insulationConduction = 0.014
		note = (has insulation)
	}
	TANK
	{
		name = LqdMethane
		mass = 0.0000096
		utilization = 1
		fillable = True
		amount = 0.0
		maxAmount = 0.0
		temperature = 111.45
		wallThickness = 0.0025
		wallConduction = 205
		insulationThickness = 0.0381
		insulationConduction = 0.014
		note = (has insulation)
	}
}

// Sort out the tech tree placement and utilization values
@TANK_DEFINITION[Tank-1945]:AFTER[GavTechTree]
{
	%techRequired = start
	%maxUtilization = 78
}
@TANK_DEFINITION[Tank-1955|Tank-1955-HP]:AFTER[GavTechTree]
{
	%techRequired = tech1955
	%maxUtilization = 86
}
@TANK_DEFINITION[Tank-1965|Tank-1965-HP|Tank-1965-Cryo]:AFTER[GavTechTree]
{
	%techRequired = eng1965
	%maxUtilization = 92
}
@TANK_DEFINITION[Tank-1970|Tank-1970-HP|Tank-1970-Cryo]:AFTER[GavTechTree]
{
	%techRequired = fuel1970
	%maxUtilization = 95
}
@TANK_DEFINITION[Tank-1980|Tank-1980-HP|Tank-1980-Cryo]:AFTER[GavTechTree]
{
	%techRequired = fuel1980
	%maxUtilization = 96
}
@TANK_DEFINITION[Tank-1995|Tank-1995-HP|Tank-1995-Cryo]:AFTER[GavTechTree]
{
	%techRequired = fuel1995
	%maxUtilization = 97
}
@TANK_DEFINITION[Tank-2020|Tank-2020-HP|Tank-2020-Cryo]:AFTER[GavTechTree]
{
	%techRequired = fuel2020
	%maxUtilization = 98
}
@TANK_DEFINITION[Tank-2040|Tank-2040-HP|Tank-2040-Cryo]:AFTER[GavTechTree]
{
	%techRequired = fuel2040
	%maxUtilization = 99
}
@TANK_DEFINITION[Tank-2060|Tank-2060-HP|Tank-2060-Cryo]:AFTER[GavTechTree]
{
	%techRequired = fuel2060
	%maxUtilization = 99
}
@TANK_DEFINITION[Tank-1980-Electric]:AFTER[GavTechTree]
{
	%techRequired = ionPropulsion1980
	%maxUtilization = 92
}
@TANK_DEFINITION[Tank-1995-Electric]:AFTER[GavTechTree]
{
	%techRequired = ionPropulsion1995
	%maxUtilization = 93
}
@TANK_DEFINITION[Tank-2020-Electric]:AFTER[GavTechTree]
{
	%techRequired = ionPropulsion2020
	%maxUtilization = 94
}
@TANK_DEFINITION[Tank-2040-Electric]:AFTER[GavTechTree]
{
	%techRequired = ionPropulsion2040
	%maxUtilization = 95
}
@TANK_DEFINITION[Tank-2060-Electric]:AFTER[GavTechTree]
{
	%techRequired = ionPropulsion2060
	%maxUtilization = 96
}

//************************************************//
// Then add the parts themselves finally
//************************************************//

+PART[proceduralTankRealFuels]:FOR[GavTechTree]
{
	@name = tank_standard
	@title = Procedural Fuel Tank - Standard 
	@TechRequired = start
	!MODULE[ModuleFuelTanks] {}
	MODULE
	{
		name = ModuleFuelTanks
		volume = 1060
		utilizationTweakable = true
		maxMLILayers = 0
		maxUtilization = 78
		utilization = 78
		type = Tank-1945
		typeAvailable = Tank-1945
		typeAvailable = Tank-1955
		typeAvailable = Tank-1965
		typeAvailable = Tank-1970
		typeAvailable = Tank-1980
		typeAvailable = Tank-1995
		typeAvailable = Tank-2020
		typeAvailable = Tank-2040
		typeAvailable = Tank-2060
	}
}
+PART[proceduralTankRealFuels]:FOR[GavTechTree]
{
	@name = tank_hp
	@title = Procedural Fuel Tank - High Pressure
	@TechRequired = eng1960
	!MODULE[ModuleFuelTanks] {}
	MODULE
	{
		name = ModuleFuelTanks
		volume = 1060
		utilizationTweakable = true
		maxMLILayers = 0
		maxUtilization = 86
		utilization = 86
		type = Tank-1955-HP
		typeAvailable = Tank-1955-HP
		typeAvailable = Tank-1965-HP
		typeAvailable = Tank-1970-HP
		typeAvailable = Tank-1980-HP
		typeAvailable = Tank-1995-HP
		typeAvailable = Tank-2020-HP
		typeAvailable = Tank-2040-HP
		typeAvailable = Tank-2060-HP
	}
}
+PART[proceduralTankRealFuels]:FOR[GavTechTree]
{
	@name = tank_cryo
	@title = Procedural Fuel Tank - Cryogenic
	@TechRequired = eng1965
	!MODULE[ModuleFuelTanks] {}
	MODULE
	{
		name = ModuleFuelTanks
		volume = 1060
		utilizationTweakable = true
		maxMLILayers = 0
		maxUtilization = 92
		utilization = 92
		type = Tank-1965-Cryo
		typeAvailable = Tank-1965-Cryo
		typeAvailable = Tank-1970-Cryo
		typeAvailable = Tank-1980-Cryo
		typeAvailable = Tank-1995-Cryo
		typeAvailable = Tank-2020-Cryo
		typeAvailable = Tank-2040-Cryo
		typeAvailable = Tank-2060-Cryo
	}
}
@PART[proceduralTankRealFuels]:FOR[GavTechTree]
{
	@name = tank_electric
	@title = Procedural Fuel Tank - Electric Propulsion
	@TechRequired = ionPropulsion1980
	!MODULE[ModuleFuelTanks] {}
	MODULE
	{
		name = ModuleFuelTanks
		volume = 1060
		utilizationTweakable = true
		maxMLILayers = 0
		maxUtilization = 96
		utilization = 96
		type = Tank-1980-Electric
		typeAvailable = Tank-1980-Electric
		typeAvailable = Tank-1995-Electric
		typeAvailable = Tank-2020-Electric
		typeAvailable = Tank-2040-Electric
		typeAvailable = Tank-2060-Electric
	}
}
